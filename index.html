<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok to Insta Automation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; background-color: #f8f9fa; }
        .container { max-width: 600px; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); display: none; }
        .login-container { max-width: 400px; margin-top: 100px; padding: 30px; background: white; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .result-box { margin-top: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 10px; display: none; }
        #loading { display: none; }
    </style>
</head>
<body>
    <!-- ë¡œê·¸ì¸ í™”ë©´ -->
    <div id="loginScreen" class="container login-container" style="display: block;">
        <h3 class="text-center mb-4">ğŸ” ì ‘ì† ì¸ì¦</h3>
        <div class="mb-3">
            <input type="password" id="accessPassword" class="form-control" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <div class="d-grid">
            <button class="btn btn-dark" onclick="login()">ì ‘ì†í•˜ê¸°</button>
        </div>
        <p id="loginMessage" class="text-danger mt-3 text-center small"></p>
    </div>

    <div id="appContainer" class="container mt-5">
        <h2 class="text-center mb-4">ğŸš€ TikTok to Insta AI</h2>
        
        <!-- 1. í‹±í†¡ ë§í¬ ê²€ì¦ -->
        <div class="mb-4">
            <label class="form-label">í‹±í†¡ ë§í¬</label>
            <div class="input-group">
                <input type="text" id="tiktokLink" class="form-control" placeholder="https://www.tiktok.com/...">
                <button class="btn btn-primary" onclick="verifyLink()">ê²€ì¦ ë° ì¶”ì¶œ</button>
            </div>
            <div id="verifyMessage" class="form-text"></div>
        </div>

        <!-- ì¶”ì¶œëœ ì˜ìƒ ì •ë³´ -->
        <div id="extractSection" class="mb-4" style="display:none; background: #e9ecef; padding: 15px; border-radius: 10px;">
            <div class="d-flex align-items-center">
                <img id="videoCover" src="" style="width: 80px; border-radius: 5px; margin-right: 15px;">
                <div class="flex-grow-1">
                    <div id="videoTitle" class="fw-bold small mb-1" style="max-height: 40px; overflow: hidden;"></div>
                    <a id="downloadBtn" href="#" target="_blank" class="btn btn-sm btn-info text-white">ì›Œí„°ë§ˆí¬ ì—†ëŠ” ì˜ìƒ ë‹¤ìš´ë¡œë“œ</a>
                </div>
            </div>
            <p class="text-muted small mt-2 mb-0">ğŸ’¡ ì˜ìƒì„ ë‹¤ìš´ë¡œë“œí•œ í›„, ì•„ë˜ 'ë™ì˜ìƒ ì—…ë¡œë“œ' ì¹¸ì— ë„£ì–´ì£¼ì„¸ìš”.</p>
        </div>

        <!-- 2. ë™ì˜ìƒ ì—…ë¡œë“œ -->
        <div class="mb-4">
            <label class="form-label">ë™ì˜ìƒ ì—…ë¡œë“œ</label>
            <input type="file" id="videoFile" class="form-control" accept="video/*">
        </div>

        <!-- 3. AI ë¶„ì„ -->
        <div class="d-grid gap-2">
            <button id="analyzeBtn" class="btn btn-dark" onclick="analyzeVideo()" disabled>AI ë¶„ì„ ì‹œì‘</button>
        </div>

        <div id="loading" class="text-center mt-3">
            <div class="spinner-border text-primary" role="status"></div>
            <p>AIê°€ ì˜ìƒì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
        </div>

        <!-- ê²°ê³¼ì°½ -->
        <div id="resultBox" class="result-box">
            <h5 class="mb-3">âœ¨ AI ë¶„ì„ ê²°ê³¼</h5>
            
            <!-- í›„í‚¹ ë¬¸êµ¬ -->
            <div class="mb-3">
                <label class="form-label fw-bold">1. í›„í‚¹ ë¬¸êµ¬</label>
                <div class="input-group">
                    <input type="text" id="hookResult" class="form-control">
                    <button class="btn btn-outline-primary" onclick="copyText('hookResult')">ë³µì‚¬</button>
                </div>
            </div>

            <!-- ì¸ìŠ¤íƒ€ê·¸ë¨ ìº¡ì…˜ -->
            <div class="mb-3">
                <label class="form-label fw-bold">2. ì¸ìŠ¤íƒ€ê·¸ë¨ ìº¡ì…˜</label>
                <textarea id="captionResult" class="form-control" rows="6"></textarea>
                <div class="text-end mt-1">
                    <button class="btn btn-sm btn-outline-primary" onclick="copyText('captionResult')">ìº¡ì…˜ ë³µì‚¬</button>
                </div>
            </div>

            <!-- ìƒí’ˆ í‚¤ì›Œë“œ -->
            <div class="mb-3">
                <label class="form-label fw-bold">3. ìƒí’ˆ í‚¤ì›Œë“œ</label>
                <div class="input-group">
                    <input type="text" id="keywordResult" class="form-control">
                    <button class="btn btn-primary" onclick="searchCoupang()">ì¿ íŒ¡ ê²€ìƒ‰</button>
                    <button class="btn btn-outline-primary" onclick="copyText('keywordResult')">ë³µì‚¬</button>
                </div>
            </div>

            <!-- DM í‚¤ì›Œë“œ (ì¶”ê°€) -->
            <div class="mb-3">
                <label class="form-label fw-bold">4. DM í‚¤ì›Œë“œ (ManyChatìš©)</label>
                <div class="input-group">
                    <input type="text" id="dmKeywordResult" class="form-control">
                    <button class="btn btn-outline-primary" onclick="copyText('dmKeywordResult')">ë³µì‚¬</button>
                </div>
            </div>

            <!-- ì¿ íŒ¡ ìƒí’ˆ ì„ íƒ ì˜ì—­ -->
            <div id="coupangSection" class="mb-3" style="display:none;">
                <label class="form-label fw-bold text-danger">ğŸ›’ ì¿ íŒ¡ ì¶”ì²œ ìƒí’ˆ (ì„ íƒ)</label>
                <div id="coupangList" class="list-group">
                    <!-- ê²€ìƒ‰ëœ ìƒí’ˆë“¤ì´ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
                </div>
                <div class="mt-2 text-muted small">ğŸ’¡ ëª©ë¡ì—ì„œ ì„ íƒí•˜ê±°ë‚˜ ì•„ë˜ì— ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”.</div>
            </div>

            <!-- ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ë§í¬ ì§ì ‘ ì…ë ¥ ê°€ëŠ¥í•˜ê²Œ ìˆ˜ì • -->
            <div class="mb-3">
                <label class="form-label fw-bold">5. ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ë§í¬</label>
                <div class="input-group">
                    <input type="text" id="selectedCoupangUrl" class="form-control" placeholder="ì¡°íšŒ í›„ ì„ íƒí•˜ê±°ë‚˜ ì§ì ‘ ì…ë ¥">
                    <button class="btn btn-outline-primary" onclick="copyText('selectedCoupangUrl')">ë³µì‚¬</button>
                </div>
            </div>

            <!-- ì¸ìŠ¤íƒ€ê·¸ë¨ ê²Œì‹œë¬¼ ë§í¬ (ì¶”ê°€) -->
            <div class="mb-3">
                <label class="form-label fw-bold">6. ì¸ìŠ¤íƒ€ê·¸ë¨ ê²Œì‹œë¬¼ ë§í¬</label>
                <div class="input-group">
                    <input type="text" id="instaPostUrl" class="form-control" placeholder="ì—…ë¡œë“œí•œ ì¸ìŠ¤íƒ€ ë§í¬ ì…ë ¥">
                    <button class="btn btn-outline-primary" onclick="copyText('instaPostUrl')">ë³µì‚¬</button>
                </div>
            </div>

            <hr>

            <div class="d-grid">
                <button class="btn btn-success btn-lg" onclick="updateSheet()">âœ… ì‹œíŠ¸ ì—…ë°ì´íŠ¸ ì €ì¥</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
